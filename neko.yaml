# Neko configuration for lightweight video streaming
# For detailed configuration options, please refer to the Neko documentation:
# https://neko.m1k1o.net/docs/v3/configuration#file

desktop:
  screen: "1024x768@15"

member:
  provider: anonymous
  anonymous:
    # Allow anyone to connect with full permissions
    can_login: true
    can_connect: true
    can_watch: true
    can_host: true
    can_share_media: true
    can_access_clipboard: true
    sends_inactive_cursor: false
    can_see_inactive_cursors: false

session:
  merciful_reconnect: true
  implicit_hosting: true   # Autoâ€‘host without UI interaction
  auto_login: true         # Automatically log in users
  auto_connect: true       # Automatically connect to the stream
  auto_play: true          # Automatically start video playback
  cookie:
    enabled: false

# Add webrtc section for autoplay
webrtc:
  auto_play: true          # Force WebRTC autoplay
  
# Add client settings for autoplay
client:
  auto_play: true          # Client-side autoplay
  auto_connect: true       # Client auto-connect

plugins:
  enabled: false

chat:
  enabled: false            # No chat panel

filetransfer:
  enabled: false            # No file transfer UI

capture:
  force_recording: true
  video:
    codec: vp8
    ids: [fast_vp8]
    pipelines:
      fast_vp8:
        gst_pipeline: |
          ximagesrc display-name={display} show-pointer=false use-damage=false !
          videoconvert ! queue !
          vp8enc target-bitrate=750000 cpu-used=12 deadline=50000 error-resilient=1
                 lag-in-frames=0 min-quantizer=6 max-quantizer=28 threads=2
                 keyframe-max-dist=15 token-partitions=0 !
          tee name=t
          t. ! queue ! matroskamux ! filesink location=/tmp/recording.mkv
          t. ! appsink name=appsink

  audio:
    enabled: false                   # Completely disable audio streaming
