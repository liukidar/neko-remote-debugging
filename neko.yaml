# Neko configuration for lightweight video streaming
# For detailed configuration options, please refer to the Neko documentation:
# https://neko.m1k1o.net/docs/v3/configuration#file

desktop:
  screen: "1024x768@15"

member:
  provider: anonymous

session:
  merciful_reconnect: true
  implicit_hosting: true   # Autoâ€‘host without UI interaction
  cookie:
    enabled: false

plugins:
  enabled: false

chat:
  enabled: false            # No chat panel

filetransfer:
  enabled: false            # No file transfer UI

capture:
  video:
    codec: vp8
    ids: [fast_vp8]
    pipelines:
      # VP8 pipeline - faster connection, good for high bandwidth/low CPU
      fast_vp8:
        width: "1024"
        height: "768"
        fps: "15"
        gst_encoder: "vp8enc"
        gst_params:
          target-bitrate: "500000"    # 500 kbps in bits
          cpu-used: "8"               # Fastest encoding (0-16, higher = faster)
          deadline: "1"               # Real-time deadline
          error-resilient: "1"        # Better for packet loss
          lag-in-frames: "0"          # No buffering for instant start
          min-quantizer: "4"          # Min quality
          max-quantizer: "32"         # Max quality (lower = better)
          threads: "1"                # Single thread
          keyframe-max-dist: "15"     # Key frame every 15 frames (1 second)
        show_pointer: false
      # Alternative H.264 pipeline with faster connection (uncomment to use)
      # fast_h264:
      #   width: "1024"
      #   height: "768"
      #   fps: "15"
      #   gst_encoder: "x264enc"
      #   gst_params:
      #     bitrate: "500"
      #     speed-preset: "ultrafast"
      #     tune: "zerolatency"
      #     threads: "1"
      #     key-int-max: "15"         # Force keyframe every 15 frames
      #     intra-refresh: "true"      # Faster initial frame
      #     rc-lookahead: "0"         # No lookahead for instant start
      #     ref: "1"
      #     bframes: "0"
      #     cabac: "false"            # Faster encoding
      #   show_pointer: false
  audio:
    enabled: false                   # Completely disable audio streaming
